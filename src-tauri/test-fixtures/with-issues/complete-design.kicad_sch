(kicad_sch (version 20231120) (generator "eeschema") (generator_version "8.0")
  (uuid "00000000-0000-0000-0000-000000000003")

  (paper "A4")

  (lib_symbols)

  ; STM32 MCU with proper decoupling (100nF nearby)
  (symbol (lib_id "MCU_ST_STM32F4:STM32F401CCU6") (at 150.0 100.0 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid "20000001-0000-0000-0000-000000000001")
    (property "Reference" "U1" (at 151.6 98.53 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "STM32F401CCU6" (at 151.6 101.07 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Package_QFP:LQFP-48_7x7mm_P0.5mm" (at 148.552 100.0 90)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid "20000001-0000-0000-0000-000000000011"))
    (pin "2" (uuid "20000001-0000-0000-0000-000000000012"))
  )

  ; Decoupling capacitor 100nF nearby the IC
  (symbol (lib_id "Device:C") (at 155.0 105.0 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid "20000002-0000-0000-0000-000000000001")
    (property "Reference" "C1" (at 156.6 103.53 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "100nF" (at 156.6 106.07 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Capacitor_SMD:C_0402_1005Metric" (at 153.552 105.0 90)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid "20000002-0000-0000-0000-000000000011"))
    (pin "2" (uuid "20000002-0000-0000-0000-000000000012"))
  )

  ; I2C with proper pull-up resistors
  (global_label "SDA" (at 200.0 80.0 0) (shape bidirectional)
    (effects (font (size 1.27 1.27)) (justify left))
    (uuid "20000003-0000-0000-0000-000000000001")
  )

  (global_label "SCL" (at 200.0 90.0 0) (shape bidirectional)
    (effects (font (size 1.27 1.27)) (justify left))
    (uuid "20000003-0000-0000-0000-000000000002")
  )

  ; 4.7k pull-up resistor for I2C (SDA)
  (symbol (lib_id "Device:R") (at 205.0 75.0 90) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid "20000004-0000-0000-0000-000000000001")
    (property "Reference" "R1" (at 205.0 73.53 0)
      (effects (font (size 1.27 1.27)))
    )
    (property "Value" "4.7k" (at 205.0 76.07 0)
      (effects (font (size 1.27 1.27)))
    )
    (property "Footprint" "Resistor_SMD:R_0402_1005Metric" (at 205.0 73.552 90)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid "20000004-0000-0000-0000-000000000011"))
    (pin "2" (uuid "20000004-0000-0000-0000-000000000012"))
  )

  ; 4.7k pull-up resistor for I2C (SCL)
  (symbol (lib_id "Device:R") (at 205.0 85.0 90) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid "20000004-0000-0000-0000-000000000002")
    (property "Reference" "R2" (at 205.0 83.53 0)
      (effects (font (size 1.27 1.27)))
    )
    (property "Value" "4.7k" (at 205.0 86.07 0)
      (effects (font (size 1.27 1.27)))
    )
    (property "Footprint" "Resistor_SMD:R_0402_1005Metric" (at 205.0 83.552 90)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid "20000004-0000-0000-0000-000000000021"))
    (pin "2" (uuid "20000004-0000-0000-0000-000000000022"))
  )

  ; Crystal with proper load capacitors
  (symbol (lib_id "Device:Crystal") (at 180.0 120.0 90) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid "20000005-0000-0000-0000-000000000001")
    (property "Reference" "Y1" (at 181.6 118.53 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "8MHz" (at 181.6 121.07 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Crystal:Crystal_HC49-4H_Vertical" (at 178.552 120.0 90)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid "20000005-0000-0000-0000-000000000011"))
    (pin "2" (uuid "20000005-0000-0000-0000-000000000012"))
  )

  ; Load capacitor 1 (22pF)
  (symbol (lib_id "Device:C") (at 175.0 125.0 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid "20000006-0000-0000-0000-000000000001")
    (property "Reference" "C2" (at 176.6 123.53 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "22pF" (at 176.6 126.07 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Capacitor_SMD:C_0402_1005Metric" (at 173.552 125.0 90)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid "20000006-0000-0000-0000-000000000011"))
    (pin "2" (uuid "20000006-0000-0000-0000-000000000012"))
  )

  ; Load capacitor 2 (22pF)
  (symbol (lib_id "Device:C") (at 185.0 125.0 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid "20000006-0000-0000-0000-000000000002")
    (property "Reference" "C3" (at 186.6 123.53 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "22pF" (at 186.6 126.07 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Capacitor_SMD:C_0402_1005Metric" (at 183.552 125.0 90)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid "20000006-0000-0000-0000-000000000021"))
    (pin "2" (uuid "20000006-0000-0000-0000-000000000022"))
  )

  ; Power symbols
  (power_symbol (lib_id "power:GND") (at 155.0 130.0 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid "20000007-0000-0000-0000-000000000001")
    (property "Reference" "#PWR01" (at 155.0 136 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Value" "GND" (at 155.0 134 0)
      (effects (font (size 1.27 1.27)))
    )
  )

  (power_symbol (lib_id "power:+3.3V") (at 155.0 90.0 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid "20000007-0000-0000-0000-000000000002")
    (property "Reference" "#PWR02" (at 155.0 84 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Value" "+3.3V" (at 155.0 86 0)
      (effects (font (size 1.27 1.27)))
    )
  )

  ; Some wires
  (wire (pts (xy 150 100) (xy 155 100))
    (uuid "20000008-0000-0000-0000-000000000001")
  )

  (wire (pts (xy 155 105) (xy 155 130))
    (uuid "20000008-0000-0000-0000-000000000002")
  )
)
